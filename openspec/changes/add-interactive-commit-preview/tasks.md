## 1. 实施

### 1.1 基础工程与约束落地
- [ ] 1.1.1 初始化 Python 3.12+ 与 uv 项目结构（`pyproject.toml`、依赖分组、可执行入口）
- [ ] 1.1.2 配置静态检查与格式化（Type Hint、lint/format、基础 CI 命令）
- [ ] 1.1.3 设计并落地 `src/` 模块边界（CLI/交互、LLM 调用、Git 信息获取、提交信息校验与格式化、配置与错误）
- [ ] 1.1.4 约定 Public API 的 Google style docstring（英文）并在关键模块先落一两个示例

### 1.2 Git 变更上下文采集
- [ ] 1.2.1 检测是否在 Git worktree 内运行；失败时输出英文、可操作的提示
- [ ] 1.2.2 读取并规范化 staged 变更（优先 `git diff --staged`），并在无暂存变更时给出下一步建议（如 `git add -p`）
- [ ] 1.2.3 收集最小必要的仓库元信息（如分支名、`git status --porcelain` 概览）用于提升生成质量
- [ ] 1.2.4 增加上下文安全阈值（大 diff 截断/文件数限制/二进制文件跳过）以避免超大输入

### 1.3 LLM 调用（仅 OpenAI 兼容 Chat Completions）
- [ ] 1.3.1 实现 OpenAI 兼容 Chat Completions Client（`base_url`/`api_key`/`model`/超时/重试；支持合理默认值）
- [ ] 1.3.2 设计 Prompt 构造器：明确要求输出 Semantic/Conventional Commit 格式，并要求英文结果
- [ ] 1.3.3 实现响应解析与基础容错（空响应、非文本响应、异常结构）

### 1.4 提交信息生成、格式化与校验（Semantic）
- [ ] 1.4.1 定义并实现语义化提交信息校验器（至少覆盖 `type(scope): subject` / `type: subject`）
- [ ] 1.4.2 对 subject 做基础规范化（去多余空格、首字母大小写策略、长度上限策略）
- [ ] 1.4.3 增加失败恢复：当模型输出不符合格式时，执行一次轻量“修复/再生成”策略并给出英文提示

### 1.5 全英文 CLI 交互与 Git 工作流融合
- [ ] 1.5.1 实现 CLI 命令入口与 `--help`（全英文），默认行为为“生成并输出”，不替代 `git`
- [ ] 1.5.2 提供可选的工作流辅助输出（例如打印可直接复制的 `git commit -m ...` 示例），避免强行接管提交
- [ ] 1.5.3 增加 loading 状态、取消（Ctrl+C）处理与建设性的错误提示（全英文）

### 1.6 性能优先策略（默认参数 + 降级）
- [ ] 1.6.1 设定性能优先的默认模型参数（如较低 `max_tokens`、合理温度、严格超时）
- [ ] 1.6.2 实现上下文压缩策略（按优先级截断 diff、仅保留关键片段），并在发生截断时提示用户
- [ ] 1.6.3 实现可控的降级路径（例如减少上下文/降低输出要求/切换备用模型配置）以避免长时间等待

### 1.7 测试与质量门禁
- [ ] 1.7.1 单元测试：Prompt 构造、输出解析、语义化提交校验器
- [ ] 1.7.2 集成测试：Git 上下文采集（临时仓库）、CLI 基本行为（无暂存/有暂存/缺少配置/模型失败）
- [ ] 1.7.3 覆盖率门禁：确保覆盖率 > 70%，并在 CI 中可重复执行

### 1.8 文档与发布（按提案要求）
- [ ] 1.8.1 补齐英文 README（安装、使用示例、最小配置、常见错误与排查）
- [ ] 1.8.2 补齐 CLI 帮助与命令说明（英文），并确保与实际参数一致
- [ ] 1.8.3 准备发布元信息（包名、版本、入口命令、License 等）并做一次端到端试跑验证
